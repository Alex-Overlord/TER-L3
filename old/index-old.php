<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>Étude des préférences dans l’expression de la quantification</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
	<link rel="icon" href="images/favicon.ico" type="image/x-icon">
    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Prata&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">
		
	<link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
	<link rel="stylesheet" href="css/nouislider.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body> 
		
  <div class="main-section">

		<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.php">Étude des préférences dans l’expression de la quantification</a>
	    </div>
	  </nav>
    <!-- END nav -->

  	<section class="hero-wrap js-fullheight">
  		<div class="container">
  			<div class="row description js-fullheight align-items-center justify-content-center">
  				<div class="col-md-8 text-center">
  					<div class="text">
  						<h1>TER L3</h1>
  						<h3 class="mb-5" style="color: white;"><b>Étude des préférences dans l’expression de la quantification</b></h3>
  						<p><a href="https://gitlab.info-ufr.univ-montp2.fr/e20170000656/TER_L3" target=_blank class="btn btn-white px-4 py-3"><i class="ion-ios-copy mr-2"></i>Voir le code source</a></p>
  					</div>
  				</div>
  			</div>
  		</div>
  	</section>

  	<section class="ftco-section" id="navigationTabs">
			<div class="container">
						<h2 class="heading-section mb-4">Informations</h2>
						<div class="tabulation">
							<ul class="nav nav-tabs">
							  <li class="nav-item">
							    <a class="nav-link active" data-toggle="tab" href="#menu1">Fonctionnement</a>
							  </li>
							  <li class="nav-item">
							    <a class="nav-link" data-toggle="tab" href="#menu2">But de l'étude</a>
							  </li>
							  <li class="nav-item">
							    <a class="nav-link" data-toggle="tab" href="#menu3">Auteurs</a>
							  </li>
							  <li class="nav-item">
							    <a class="nav-link" data-toggle="tab" href="#menu4">Vie privée</a>
							  </li>
							</ul>

							<!-- Tab panes -->
							<div class="tab-content border border-top-0">
							  <div class="tab-pane container p-4 active" id="menu1" style="text-align: justify;">
							  	Pour chaque phrase, vous aurez 2 à 4 propositions. Vous devez noter chacune de ces propositions selon qu'elles vous semblent ou pas avoir le même sens que la phrase. Vous pourrez évaluer les propositions à l'aide de ces 3 boutons :<br><br>
						  		<div style="text-align: center;" class="btn-group-toggle" data-toggle="buttons">
								  <label class="btn btn-outline-success">
								    <input type="radio" name="test" value="o" autocomplete="off">OUI
								  </label>
								  <label class="btn btn-outline-primary">
								    <input type="radio" name="test" value="p" autocomplete="off">PEUT-ÊTRE
								  </label>
								  <label class="btn btn-outline-danger">
								    <input type="radio" name="test" value="n" autocomplete="off">NON
								  </label>
								</div>

							  	<br><br><b>Merci de prendre un petit peu de votre temps pour répondre à ce questionnaire !</b>
								
							  </div>
							  <div style="text-align: justify;" class="tab-pane container p-4 fade" id="menu2">
							  	À l'aide de vos réponses à ces questions, nous réaliserons une étude statistique simple pour étudier les différences de sens et les préférences des locuteurs entre les différentes expressions de la quantification universelle (quel que soit, tout, tous les, chaque,...) et existentielle (il existe, un, certains, des...).
							  </div>
							  <div style="text-align: justify;" class="tab-pane container p-4 fade" id="menu3">
							  	Nous sommes 4 étudiants de L3 Informatique de la <a href="https://sciences.edu.umontpellier.fr/" target="_blank">Faculté des Sciences</a> de l'<a href="https://www.umontpellier.fr/" target="_blank">Université de Montpellier</a> :
							  		<ul>
							  			<li>Alexandre Canton Condes</li>
							  			<li>Ambre Lamouchi (<a href="https://cmi-fds.edu.umontpellier.fr/presentation/cmi-informatique/" target="_blank">CMI Informatique</a>)</li>
							  			<li>Jérémie Roux (<a href="https://cmi-fds.edu.umontpellier.fr/presentation/cmi-informatique/" target="_blank">CMI Informatique</a>)</li>
							  			<li>Yasmime Smaili (<a href="https://cmi-fds.edu.umontpellier.fr/presentation/cmi-informatique/" target="_blank">CMI Informatique</a>)</li>
							  		</ul>

							  	Enseignant : <a href="https://www.lirmm.fr/~retore/" target="_blank">M. Christian Retoré</a> (<a href="https://www.lirmm.fr" target="_blank">LIRMM</a> - Responsable <a href="https://www.lirmm.fr/recherche/equipes/texte" target="_blank">équipe TEXTE</a>)
							  </div>
							  <div style="text-align: justify;" class="tab-pane container p-4 fade" id="menu4">
							  	<b>Ce questionnaire est anonyme. </b>N'hésitez pas à renseigner votre adresse mail si vous souhaitez être tenu informé de l'avancée de cette étude. Nous nous engageons à ne pas diffuser votre adresse mail.
							  </div>
							</div>
				</div>
			</div>
	  </section>
	  <!-- - - - - -end- - - - -  -->

	  <form class="text-center" action="" method="post">

		<section class="ftco-section pb-0">
	  	<div class="container" style="padding-bottom: 20px;">
	  		<div class="row">
	  			<div class="col-md-12 heading-title mb-5">
	          		<h2>Phrases à analyser</h2>
	        	</div>

		  		<?php

				$url = 'questions.json';
				$data = file_get_contents($url);
				$json = json_decode($data);
				
	    		//shuffle($json); // Ordre aléatoire
				$ordre= array('1'=>0,'2'=>0,'3'=>0,'4'=>0,'5'=>0,'6'=>0,
				'7'=>0,'8'=>0,'9'=>0,'10'=>0,'11'=>0,'12'=>0);
				
				$index = 1;
				foreach ($json as $i){
					echo '<div class="block"><div class="blockquote mb-5">'.
						'<small>Phrase n°'.$index.'</small><br>'.
						'<b>'.$i->question.'</b><br><br>';
					$indexq = 1;
					foreach ($i->reponses as $q){
						echo '<div style="text-align: center;">'.
						$q.'<br>'.
						'<div style="text-align: center;" class="btn-group-toggle" data-toggle="buttons">'.
						'<label class="btn btn-outline-success">'.
						'<input type="radio" name="'.$i->id.'_'.$indexq.'" value="o" autocomplete="off">OUI</label>'.
						'<label class="btn btn-outline-primary">'.
						'<input type="radio" name="'.$i->id.'_'.$indexq.'" value="p" autocomplete="off">PEUT-ÊTRE</label>'.
						'<label class="btn btn-outline-danger">'.
						'<input type="radio" name="'.$i->id.'_'.$indexq.'" value="n" autocomplete="off">NON</label>'.
						'</div><br></div>';
						$indexq++;
					}
					echo '</div></div>';
					$ordre[$i->id]=$index;
					$index++;
				}
				?>
	        </div>
	  	</div>
  	</section>
		
		<section class="ftco-section ftco-section-2 bg-light" id="cards">
			<div class="container">
				<div style="text-align: center;" class="btn-group-toggle mb-3" data-toggle="buttons">
				<h5>Le français est-il votre langue maternelle ?<a style="color: red;"> *</a></h5>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="langueM" value="oui" autocomplete="off">OUI
				  </label>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="langueM" value="non" autocomplete="off">NON
				  </label>
				</div>
				<div style="text-align: center;" class="btn-group-toggle mb-3" data-toggle="buttons">
				<br>
				<h5>Quel est votre statut ?<a style="color: red;"> *</a></h5>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="statut" value="etudiant" autocomplete="off">Étudiant
				  </label>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="statut" value="enseignant" autocomplete="off">Enseignant
				  </label>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="statut" value="autre" autocomplete="off">Autre
				  </label>
				</div>
				<div style="text-align: center;" class="btn-group-toggle mb-5" data-toggle="buttons">
				<br>
				<h5>Quel est votre secteur d'activité ou d'étude ?<a style="color: red;"> *</a></h5>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="secteur" value="sciencesA" autocomplete="off">Sciences appliquées
				  </label>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="secteur" value="lettres" autocomplete="off">Lettres
				  </label>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="secteur" value="economie" autocomplete="off">Économie
				  </label>
				  <label class="btn btn-outline-secondary">
				    <input type="radio" name="secteur" value="autre" autocomplete="off">Autre
				  </label>
				</div>
				<div style="margin-top: 5px; margin-bottom: 15px;" class="text-center">
					<h5>Quelle est votre adresse mail ?</h5>
				</div>
				<div class="row mb-4" style="padding-left:15%; padding-right:15%;">
					<div class="input-group mb-2">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="ion-ios-paper-plane"></i>
                      </span>
                    </div>
                    <input type="email" class="form-control" placeholder="Adresse mail" name="email">
                  </div>
                  Si vous souhaitez être tenu informé de l'avancée de l'étude
				</div>
				<input class="btn btn-primary" type="submit" value="Valider les réponses" name="envoyer">
<?php

if(isset($_POST['envoyer'])){

	$langueM=$_POST['langueM'];
	$statut=$_POST['statut'];
	$secteur=$_POST['secteur'];
	$email=$_POST['email'];

	$r = array(
		'1_1'=>$_POST['1_1'],'1_2'=>$_POST['1_2'],'1_3'=>$_POST['1_3'],
		'2_1'=>$_POST['2_1'],'2_2'=>$_POST['2_2'],'2_3'=>$_POST['2_3'],
		'3_1'=>$_POST['3_1'],'3_2'=>$_POST['3_2'],
		'4_1'=>$_POST['4_1'],'4_2'=>$_POST['4_2'],'4_3'=>$_POST['4_3'],
		'5_1'=>$_POST['5_1'],'5_2'=>$_POST['5_2'],'5_3'=>$_POST['5_3'],
		'6_1'=>$_POST['6_1'],'6_2'=>$_POST['6_2'],
		'7_1'=>$_POST['7_1'],'7_2'=>$_POST['7_2'],'7_3'=>$_POST['7_3'],
		'8_1'=>$_POST['8_1'],'8_2'=>$_POST['8_2'],
		'9_1'=>$_POST['9_1'],'9_2'=>$_POST['9_2'],'9_3'=>$_POST['9_3'],
		'10_1'=>$_POST['10_1'],'10_2'=>$_POST['10_2'],'10_3'=>$_POST['10_3'],'10_4'=>$_POST['10_4'],
		'11_1'=>$_POST['11_1'],'11_2'=>$_POST['11_2'],
		'12_1'=>$_POST['12_1'],'12_2'=>$_POST['12_2'],'12_3'=>$_POST['12_3']
	);

	$p1_1=$r['1_1'];
	$p1_2=$r['1_2'];
	$p1_3=$r['1_3'];

	$p2_1=$r['2_1'];
	$p2_2=$r['2_2'];
	$p2_3=$r['2_3'];

	$p3_1=$r['3_1'];
	$p3_2=$r['3_2'];

	$p4_1=$r['4_1'];
	$p4_2=$r['4_2'];
	$p4_3=$r['4_3'];

	$p5_1=$r['5_1'];
	$p5_2=$r['5_2'];
	$p5_3=$r['5_3'];

	$p6_1=$r['6_1'];
	$p6_2=$r['6_2'];

	$p7_1=$r['7_1'];
	$p7_2=$r['7_2'];
	$p7_3=$r['7_3'];

	$p8_1=$r['8_1'];
	$p8_2=$r['8_2'];

	$p9_1=$r['9_1'];
	$p9_2=$r['9_2'];
	$p9_3=$r['9_3'];

	$p10_1=$r['10_1'];
	$p10_2=$r['10_2'];
	$p10_3=$r['10_3'];
	$p10_4=$r['10_4'];

	$p11_1=$r['11_1'];
	$p11_2=$r['11_2'];

	$p12_1=$r['12_1'];
	$p12_2=$r['12_2'];
	$p12_3=$r['12_3'];



	$pretEnvoi = false;
	$setr = true;
	$hackRadio = false;
	foreach ($r as $key => $value) {
		if(is_null($value)){
			$setr = false;
		}
		else{
			$hackRadio = ($value!='o' && $value!='p' && $value!='n');
		}
	}
	$vide = !isset($langueM) && !isset($statut) && !isset($secteur) && $setr;
	$OK = isset($langueM) && isset($statut) && isset($secteur) && $setr;
	$hackLangue = $langueM!='oui' && $langueM!='non' && isset($langueM);
	$hackStatut = $statut!='etudiant' && $statut!='enseignant' && $statut!='autre' && isset($statut);
	$hackSecteur = $secteur!='sciencesA' && $secteur!='lettres' && $secteur!='economie' && $secteur!='autre' && isset($secteur);
	$hack = $hackRadio || $hackLangue || $hackStatut || $hackSecteur;

	if($vide){
		echo '<div class="alert alert-danger" style="margin-top:30px; text-align:left;" role="alert"><b>Merci de remplir les champs avant de valider les réponses !</b><br></div>';
	}
	else if($hack){
		echo '<div class="alert alert-danger" style="margin-top:30px; text-align:left;" role="alert"><b>Merci de ne pas hacker ce formulaire !</b><br></div>';
	}
	else if(!$OK){
		echo '<div class="alert alert-danger" style="margin-top:30px; text-align:left;" role="alert"><b>Vos réponses n\'ont pas été envoyées car vous n\'avez pas rempli le(s) champ(s) suivant(s) :</b><br>';
		if(!isset($langueM)){
			echo '- Le français est-il votre langue maternelle ?<br>';
		}
		if(!isset($statut)){
			echo '- Quel est votre statut ?<br>';
		}
		if(!isset($secteur)){
			echo '- Quel est votre secteur d\'activité ou d\'étude ?<br>';
		}
		if(!$setr){
			$result="";
			foreach ($r as $key => $value) {
				if(is_null($value)){
					$result.=str_replace('_', '.', $key).", ";
				}
			}
			echo '- Phrase(s) '.substr($result,0,-2).'<br>';
		}
		echo '</div>';
	}
	else{
		$pretEnvoi=true;
		echo '<div class="alert alert-success" style="margin-top:30px; text-align:left;" role="alert"><b>Vos réponses ont été envoyées.</b></div>';
	}
}

?>
			</div>
		</div>
	  </section>
	  <!-- - - - - -end- - - - -  -->

	  </form>

	  <footer class="ftco-section ftco-section-2">
	  	<div class="col-md-12 text-center">
          <p class="mb-0">
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> | TER L3 - Étude des préférences dans l’expression de la quantification<br><br>
            <b>Dernière mise à jour : 17/11/2019 à 17:54</b>
          </p>
        </div>
	  </footer>

  </div>

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>

  <script src="js/nouislider.min.js"></script>
  <script src="js/moment-with-locales.min.js"></script>
  <script src="js/bootstrap-datetimepicker.min.js"></script>
  <script src="js/main.js"></script>
    
  </body>
</html>

<?php

	try{
	    $dbh = new PDO('mysql:host=192.168.0.20:3307;dbname=TERL3','jroux', '1234');
	    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

	}
	catch(PDOException $e){
	    echo $e->getMessage();
	    die("Connexion impossible !");
	}

	if(isset($_POST['envoyer'])){
		if ($pretEnvoi){
			$sql = "INSERT INTO utilisateur (dateEnvoi, langueM, statut, secteur, email,1_1,1_2,1_3,2_1,2_2,2_3,3_1,3_2,4_1,4_2,4_3,5_1,5_2,5_3,6_1,6_2,7_1,7_2,7_3,8_1,8_2,9_1,9_2,9_3,10_1,10_2,10_3,10_4,11_1,11_2,12_1,12_2,12_3,ordre1,ordre2,ordre3,ordre4,ordre5,ordre6,ordre7,ordre8,ordre9,ordre10,ordre11,ordre12) VALUES (NOW(),'$langueM','$statut','$secteur','$email','$p1_1','$p1_2','$p1_3','$p2_1','$p2_2','$p2_3','$p3_1','$p3_2','$p4_1','$p4_2','$p4_3','$p5_1','$p5_2','$p5_3','$p6_1','$p6_2','$p7_1','$p7_2','$p7_3','$p8_1','$p8_2','$p9_1','$p9_2','$p9_3','$p10_1','$p10_2','$p10_3','$p10_4','$p11_1','$p11_2','$p12_1','$p12_2','$p12_3','$ordre[1]','$ordre[2]','$ordre[3]','$ordre[4]','$ordre[5]','$ordre[6]','$ordre[7]','$ordre[8]','$ordre[9]','$ordre[10]','$ordre[11]','$ordre[12]')";
		$dbh->exec($sql);

		}
	}

	$dbh->close();
?>